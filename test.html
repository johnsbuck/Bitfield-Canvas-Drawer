<canvas id="c" width="1024" height="1024">

<script>
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  function formulaFill(context, mod) {
    context.fillStyle = "black";

    for (let x = 0; x < 256; x++) {
      for (let y = 0; y < 256; y++) {
        if ((x | y) % mod) {
          context.fillRect(x*4, y*4, 4, 4);
        }
      }
    }
  }

  function clear(context) {
    // Clears content within Canvas
    context.clearRect(0, 0, 1024, 1024);

    // Add white background instead of transparent
    context.fillStyle = "white";
    context.fillRect(0, 0, 1024, 1024);
  }

  async function main() {
    const context = c.getContext('2d');

    let last = 255;
    for (let mod = 1; mod < 255; mod++) {
      formulaFill(context, mod);
      await sleep(10);
      clear(context);
    }
    formulaFill(context, 255);

  }

  main();
</script>
